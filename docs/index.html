<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Automated Cleaning of Occurrence Records from Biological Collections • CoordinateCleaner</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Automated Cleaning of Occurrence Records from Biological Collections">
<meta property="og:description" content="Automated flagging of common spatial and temporal errors in biological and palaeontological collection data, for the use in conservation, ecology and palaeontology. Includes automated tests to easily flag (and exclude) records assigned to country or province centroid, the open ocean, the headquarters of the Global Biodiversity Information Facility, urban areas or the location of biodiversity institutions (museums, zoos, botanical gardens, universities). Furthermore identifies per species outlier coordinates, zero coordinates, identical latitude/longitude and invalid coordinates. Also implements an algorithm to identify data sets with a significant proportion of rounded coordinates. Especially suited for large data sets. See &lt;https://github.com/azizka/CoordinateCleaner/wiki&gt; for more details and tutorials.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">CoordinateCleaner</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Cleaning_GBIF_data_with_CoordinateCleaner.html">Tutorial - Cleaning GBIF data for the use in biogeography</a>
    </li>
    <li>
      <a href="articles/Cleaning_PBDB_fossils_with_CoordinateCleaner.html">Tutorial - Cleaning fossil data for the use in biogeography and palaeontology</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/azizka/CoordinateCleaner">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="coordinatecleaner-v2-0-1" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#coordinatecleaner-v2-0-1" class="anchor"></a>CoordinateCleaner v2.0-1</h1></div>
<p><a href="https://travis-ci.org/azizka/CoordinateCleaner"><img src="https://travis-ci.org/azizka/CoordinateCleaner.svg?branch=master" alt="Build Status"></a> <a href="https://codecov.io/gh/azizka/CoordinateCleaner"><img src="https://codecov.io/gh/azizka/CoordinateCleaner/branch/master/graph/badge.svg" alt="codecov"></a> <a href="https://cran.r-project.org/package=CoordinateCleaner"><img src="http://www.r-pkg.org/badges/version/CoordinateCleaner" alt="CRAN_Status_Badge"></a> <img src="http://cranlogs.r-pkg.org/badges/CoordinateCleaner" alt="rstudio mirror downloads"></p>
<p><strong><em>Note: the latest release of CoordinateCleaner (2.0), might cause compatibility issues with scripts using older versions (1.x), since some function and argument names changed. Please see the news file for details.</em></strong></p>
<p>Automated flagging of common spatial and temporal errors in biological and palaeontological collection data, for the use in conservation, ecology and palaeontology. Specifically includes tests for</p>
<ul>
<li>General coordinate validity</li>
<li>Country and province centroids</li>
<li>Capital coordinates</li>
<li>Coordinates of biodiversity institutions</li>
<li>Spatial outliers</li>
<li>Coordinate-country discordance</li>
<li>Duplicated coordinates per species</li>
<li>Assignment to the location of the GBIF headquarters</li>
<li>Urban areas</li>
<li>Seas</li>
<li>Plain zeros</li>
<li>Equal longitude and latitude</li>
<li>Rounded coordinates</li>
<li>DDMM to DD.DD coordinate conversion errors</li>
<li>Large temporal uncertainty (fossils)</li>
<li>Equal minimum and maximum ages (fossils)</li>
<li>Spatio-temporal outliers (fossils)</li>
</ul>
<p>CoordinateCleaner can be particularly useful to ensure geographic data quality when using data from GBIF (e.g. obtained with <a href="https://github.com/ropensci/rgbif">rgbif</a>) for historical biogeography (e.g. with <a href="https://cran.r-project.org/web/packages/BioGeoBEARS/index.html">BioGeoBEARS</a> or <a href="https://cran.r-project.org/web/packages/phytools/index.html">phytools</a>), automated conservation assessment (e.g. with <a href="https://github.com/azizka/speciesgeocodeR/wiki">speciesgeocodeR</a> or <a href="https://cran.r-project.org/web/packages/ConR/index.html">conR</a>) or species distribution modelling (e.g. with <a href="https://cran.r-project.org/web/packages/dismo/index.html">dismo</a> or <a href="https://cran.r-project.org/web/packages/sdm/index.html">sdm</a>. See <a href="https://github.com/ropensci/scrubr">scrubr</a> and <a href="https://github.com/ropensci/taxize">taxize</a> for complementary taxonomic cleaning or <a href="https://github.com/cran/biogeo">biogeo</a> for correcting spatial coordinate errors.</p>
<p>See <a href="https://github.com/azizka/CoordinateCleaner/blob/master/NEWS.html">News</a> for update information.</p>
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<div id="stable-from-cran" class="section level2">
<h2 class="hasAnchor">
<a href="#stable-from-cran" class="anchor"></a>Stable from CRAN</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"CoordinateCleaner"</span>)</code></pre></div>
<pre><code>## Installing package into 'C:/Users/alexander.zizka/Documents/R/win-library/3.4'
## (as 'lib' is unspecified)</code></pre>
<pre><code>## Warning: unable to access index for repository https://cloud.r-project.org/src/contrib:
##   cannot open URL 'https://cloud.r-project.org/src/contrib/PACKAGES'

## Warning: unable to access index for repository https://cloud.r-project.org/src/contrib:
##   cannot open URL 'https://cloud.r-project.org/src/contrib/PACKAGES'</code></pre>
<pre><code>## Warning: unable to access index for repository https://cloud.r-project.org/bin/windows/contrib/3.4:
##   cannot open URL 'https://cloud.r-project.org/bin/windows/contrib/3.4/PACKAGES'

## Warning: unable to access index for repository https://cloud.r-project.org/bin/windows/contrib/3.4:
##   cannot open URL 'https://cloud.r-project.org/bin/windows/contrib/3.4/PACKAGES'</code></pre>
<pre><code>## package 'CoordinateCleaner' successfully unpacked and MD5 sums checked
## 
## The downloaded binary packages are in
##  C:\Users\alexander.zizka\AppData\Local\Temp\RtmpWkHcQD\downloaded_packages</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(CoordinateCleaner)</code></pre></div>
<pre><code>## Warning: package 'CoordinateCleaner' was built under R version 3.4.4</code></pre>
<pre><code>## Loading required package: sp</code></pre>
</div>
<div id="developmental-using-devtools" class="section level2">
<h2 class="hasAnchor">
<a href="#developmental-using-devtools" class="anchor"></a>Developmental using devtools</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"azizka/CoordinateCleaner"</span>)</code></pre></div>
<pre><code>## Downloading GitHub repo azizka/CoordinateCleaner@master
## from URL https://api.github.com/repos/azizka/CoordinateCleaner/zipball/master</code></pre>
<pre><code>## Installing CoordinateCleaner</code></pre>
<pre><code>## Installing 1 package: sp</code></pre>
<pre><code>## Installing package into 'C:/Users/alexander.zizka/Documents/R/win-library/3.4'
## (as 'lib' is unspecified)</code></pre>
<pre><code>## Warning: package 'sp' is in use and will not be installed</code></pre>
<pre><code>## "C:/PROGRA~1/R/R-34~1.3/bin/x64/R" --no-site-file --no-environ --no-save  \
##   --no-restore --quiet CMD INSTALL  \
##   "C:/Users/alexander.zizka/AppData/Local/Temp/RtmpWkHcQD/devtools2d10485350cb/azizka-CoordinateCleaner-04f7f58"  \
##   --library="C:/Users/alexander.zizka/Documents/R/win-library/3.4"  \
##   --install-tests</code></pre>
<pre><code>## </code></pre>
<pre><code>## Reloading installed CoordinateCleaner</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(CoordinateCleaner)</code></pre></div>
</div>
</div>
<div id="usage" class="section level1">
<h1 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h1>
<p>A simple example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Simulate example data</span>
minages &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">250</span>, <span class="dv">0</span>, <span class="dv">65</span>)
exmpl &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">species =</span> <span class="kw">sample</span>(letters, <span class="dt">size =</span> <span class="dv">250</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>),
                    <span class="dt">decimallongitude =</span> <span class="kw">runif</span>(<span class="dv">250</span>, <span class="dt">min =</span> <span class="dv">42</span>, <span class="dt">max =</span> <span class="dv">51</span>),
                    <span class="dt">decimallatitude =</span> <span class="kw">runif</span>(<span class="dv">250</span>, <span class="dt">min =</span> <span class="op">-</span><span class="dv">26</span>, <span class="dt">max =</span> <span class="op">-</span><span class="dv">11</span>),
                    <span class="dt">min_ma =</span> minages,
                    <span class="dt">max_ma =</span> minages <span class="op">+</span><span class="st"> </span><span class="kw">runif</span>(<span class="dv">250</span>, <span class="fl">0.1</span>, <span class="dv">65</span>),
                    <span class="dt">dataset =</span> <span class="st">"clean"</span>)

<span class="co"># Run record-level tests</span>
rl &lt;-<span class="st"> </span><span class="kw"><a href="reference/clean_coordinates.html">clean_coordinates</a></span>(<span class="dt">x =</span> exmpl)</code></pre></div>
<pre><code>## Testing coordinate validity</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing equal lat/lon</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing zero coordinates</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing country capitals</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing country centroids</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing sea coordinates</code></pre>
<pre><code>## Flagged 152 records.</code></pre>
<pre><code>## Testing geographic outliers</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing GBIF headquarters, flagging records around Copenhagen</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing biodiversity institutions</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Flagged 152 of 250 records, EQ = 0.61.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(rl)</code></pre></div>
<pre><code>## decimallatitude             equ             zer             cap 
##               0               0               0               0 
##             cen             sea             otl             gbf 
##               0             152               0               0 
##            inst         summary 
##               0             152</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(rl)</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Dataset level </span>
dsl &lt;-<span class="st"> </span><span class="kw"><a href="reference/clean_dataset.html">clean_dataset</a></span>(exmpl)</code></pre></div>
<pre><code>## Testing for dd.mm to dd.dd conversion errors</code></pre>
<pre><code>## Flagged 0 records</code></pre>
<pre><code>## Testing for rasterized collection</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-2.png" width="700"><img src="index_files/figure-html/unnamed-chunk-3-3.png" width="700"><img src="index_files/figure-html/unnamed-chunk-3-4.png" width="700"></p>
<pre><code>## Flagged 0 datasets.</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-5.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># For fossils</span>
fl &lt;-<span class="st"> </span><span class="kw"><a href="reference/clean_fossils.html">clean_fossils</a></span>(<span class="dt">x =</span> exmpl,
                          <span class="dt">taxon =</span> <span class="st">"species"</span>,
                          <span class="dt">lon =</span> <span class="st">"decimallongitude"</span>, 
                          <span class="dt">lat =</span> <span class="st">"decimallatitude"</span>)</code></pre></div>
<pre><code>## Testing coordinate validity</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing equal lat/lon</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing zero coordinates</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing country centroids</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing spatio-temporal outliers on taxon level</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing temporal range outliers on dataset level</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing temporal range outliers on taxon level</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing age validity</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing GBIF headquarters, flagging records around Copenhagen</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing biodiversity institutions</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Flagged 0 of 250 records, EQ = 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(fl)</code></pre></div>
<pre><code>## decimallatitude             aeq             cen             gbf 
##               0               0               0               0 
##            inst             spt             zer         summary 
##               0               0               0               0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Alternative example using the pipe</span>
<span class="kw">library</span>(tidyverse)</code></pre></div>
<pre><code>## -- Attaching packages ----------------------------------------------------------------------------------- tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 3.0.0     v purrr   0.2.5
## v tibble  1.4.2     v dplyr   0.7.4
## v tidyr   0.8.0     v stringr 1.3.0
## v readr   1.1.1     v forcats 0.3.0</code></pre>
<pre><code>## Warning: package 'ggplot2' was built under R version 3.4.4</code></pre>
<pre><code>## Warning: package 'purrr' was built under R version 3.4.4</code></pre>
<pre><code>## -- Conflicts -------------------------------------------------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
## x purrr::map()    masks maps::map()</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cl &lt;-<span class="st"> </span>exmpl <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/cc_val.html">cc_val</a></span>()<span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/cc_cap.html">cc_cap</a></span>()<span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/cd_ddmm.html">cd_ddmm</a></span>()<span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="reference/cf_range.html">cf_range</a></span>(<span class="dt">lon =</span> <span class="st">"decimallongitude"</span>, 
           <span class="dt">lat =</span> <span class="st">"decimallatitude"</span>, 
           <span class="dt">taxon  =</span><span class="st">"species"</span>)</code></pre></div>
<pre><code>## Testing coordinate validity</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing country capitals</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
<pre><code>## Testing for dd.mm to dd.dd conversion errors</code></pre>
<pre><code>## Flagged 0 records</code></pre>
<pre><code>## Testing temporal range outliers on taxon level</code></pre>
<pre><code>## Flagged 0 records.</code></pre>
</div>
<div id="documentation" class="section level1">
<h1 class="hasAnchor">
<a href="#documentation" class="anchor"></a>Documentation</h1>
<p>Pipelines for cleaning data from the Global Biodiversity Information Facility and the Paleobiology Database are available in <a href="https://github.com/azizka/CoordinateCleaner/tree/master/vignettes">vignettes</a>.</p>
</div>
<div id="contributing" class="section level1">
<h1 class="hasAnchor">
<a href="#contributing" class="anchor"></a>Contributing</h1>
<p>See the <a href="https://github.com/azizka/CoordinateCleaner/blob/master/CONTRIBUTING.html">CONTRIBUTING</a> document.</p>
</div>
<div id="citation" class="section level1">
<h1 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h1>
<p>Zizka, A, Silvestro, D &amp; Antonelli A (2018) CoordinateCleaner: standardized cleaning of occurrence records from biological collection databases. <a href="https://github.com/azizka/CoordinateCleaner" class="uri">https://github.com/azizka/CoordinateCleaner</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=CoordinateCleaner">https://​cloud.r-project.org/​package=CoordinateCleaner</a>
</li>
<li>Browse source code at <br><a href="https://github.com/azizka/CoordinateCleaner">https://​github.com/​azizka/​CoordinateCleaner</a>
</li>
<li>Report a bug at <br><a href="https://github.com/azizka/CoordinateCleaner/issues">https://​github.com/​azizka/​CoordinateCleaner/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Alexander Zizka <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Alexander Zizka.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
